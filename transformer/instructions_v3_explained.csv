#CGRA 4x4 pq 4x3 no funciona bien en el simulador
0
LWD R1,LWD R1,LWD R1,NOP
LWD R1,LWD R1,LWD R1,NOP
LWD R1,LWD R1,LWD R1,NOP
LWD R0,NOP,NOP,NOP
1
"SADD R2,ZERO,RCR","SADD R2,ZERO,RCR","SADD R2,ZERO,RCR",NOP
"SADD R2,ZERO,RCR","SADD R2,ZERO,RCR","SADD R2,ZERO,RCR",NOP
"SADD R2,ZERO,RCR","SADD R2,ZERO,RCR","SADD R2,ZERO,RCR",NOP
"SADD R1,ZERO,0",NOP,NOP,NOP
2
"SADD R3,ZERO,RCR","SADD R3,ZERO,RCR","SADD R3,ZERO,RCR",NOP
"SADD R3,ZERO,RCR","SADD R3,ZERO,RCR","SADD R3,ZERO,RCR",NOP
"SADD R3,ZERO,RCR","SADD R3,ZERO,RCR","SADD R3,ZERO,RCR",NOP
NOP,NOP,NOP,NOP
# Hasta aquí se ha cargado una matriz de entrada
# Pongo 0s en R0 de todos los PEs para poder acumular las multiplicaciones sin distinguir en la primera iteración
3
"SADD R0,ZERO,0","SADD R0,ZERO,0","SADD R0,ZERO,0",NOP
"SADD R0,ZERO,0","SADD R0,ZERO,0","SADD R0,ZERO,0",NOP
"SADD R0,ZERO,0","SADD R0,ZERO,0","SADD R0,ZERO,0",NOP
NOP,NOP,NOP,NOP
#Vamos a gestionar el bucle en el RC[4,1]
4
NOP,NOP,NOP,NOP
NOP,NOP,NOP,NOP
NOP,NOP,NOP,NOP
"BEQ R0, R1, 9",NOP,NOP,NOP
5
LWD ROUT,LWD ROUT,LWD ROUT,"SADD R1,R1,1"
LWD ROUT,LWD ROUT,LWD ROUT,NOP
LWD ROUT,LWD ROUT,LWD ROUT,NOP
NOP,NOP,NOP,NOP
6
"SMUL ROUT,ROUT,R1","SMUL ROUT,ROUT,R1","SMUL ROUT,ROUT,R1",NOP
"SMUL ROUT,ROUT,R1","SMUL ROUT,ROUT,R1","SMUL ROUT,ROUT,R1",NOP
"SMUL ROUT,ROUT,R1","SMUL ROUT,ROUT,R1","SMUL ROUT,ROUT,R1",NOP
NOP,NOP,NOP,NOP
7
"SADD R0,R0,ROUT","SADD R0,R0,ROUT","SADD R0,R0,ROUT",NOP
"SADD R0,R0,ROUT","SADD R0,R0,ROUT","SADD R0,R0,ROUT",NOP
"SADD R0,R0,ROUT","SADD R0,R0,ROUT","SADD R0,R0,ROUT",NOP
NOP,NOP,NOP,NOP
8
NOP,NOP,NOP,NOP
NOP,NOP,NOP,NOP
NOP,NOP,NOP,NOP
"BEQ ZERO, ZERO, 4",NOP,NOP,NOP
9
SWD ROUT,SWD ROUT,SWD ROUT,NOP
SWD ROUT,SWD ROUT,SWD ROUT,NOP
SWD ROUT,SWD ROUT,SWD ROUT,NOP
NOP,NOP,NOP,NOP
10
EXIT,NOP,NOP,NOP
NOP,NOP,NOP,NOP
NOP,NOP,NOP,NOP
NOP,NOP,NOP,NOP
